{"version":3,"file":"lock-screen-component.js","sourceRoot":"","sources":["../../src/components/lock-screen-component.ts"],"names":[],"mappings":"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","sourcesContent":["import { NavParams, NavController, Events } from 'ionic-angular';\nimport { Component } from '@angular/core';\nimport { Md5 } from 'ts-md5/dist/md5';\n\n/* HTML Template */\nconst LOCK_SCREEN_TEMPLATE = `\n      <div class=\"ILS_lock\" [ngClass]=\"!_showLockScreen ?  'ILS_lock-hidden' : ''\">\n      <div class=\"ISL_input-content\">\n        <div class=\"ILS_label-row ISL_label_title\">\n        {{ !firstPasswordSet ? passcodeLabel : secondPasscodeLabel }}\n        </div>\n        <div *ngIf=\"passcodeSubTitle\" class=\"ILS_label-row ISL_label_subTitle\">\n            {{passcodeSubTitle}}\n        </div>\n        <div class=\"ILS_circles-row\" [ngClass]=\"passcodeWrong ?  'ILS_shake' : ''\">\n        <div class=\"ILS_circle\" [ngClass]=\" enteredPasscode.length>0 ? 'ILS_full' : ''\"></div>\n        <div class=\"ILS_circle\" [ngClass]=\" enteredPasscode.length>1 ? 'ILS_full' : ''\"></div>\n        <div class=\"ILS_circle\" [ngClass]=\" enteredPasscode.length>2 ? 'ILS_full' : ''\"></div>\n        <div class=\"ILS_circle\" [ngClass]=\" enteredPasscode.length>3 ? 'ILS_full' : ''\"></div>\n        </div>\n      </div>\n        <div class=\"ILS_numbers-row\">\n          <div (click)=\"digit(1)\" class=\"ILS_digit\">1</div>\n          <div (click)=\"digit(2)\" class=\"ILS_digit\">2</div>\n          <div (click)=\"digit(3)\" class=\"ILS_digit\">3</div>\n        </div>\n        <div class=\"ILS_numbers-row\">\n          <div (click)=\"digit(4)\" class=\"ILS_digit\">4</div>\n          <div (click)=\"digit(5)\" class=\"ILS_digit\">5</div>\n          <div (click)=\"digit(6)\" class=\"ILS_digit\">6</div>\n        </div>\n        <div class=\"ILS_numbers-row\">\n          <div (click)=\"digit(7)\" class=\"ILS_digit\">7</div>\n          <div (click)=\"digit(8)\" class=\"ILS_digit\">8</div>\n          <div (click)=\"digit(9)\" class=\"ILS_digit\">9</div>\n        </div>\n        <div class=\"ILS_numbers-row\">\n          <div *ngIf=\"onAdditionalLink\" (click)=\"additionalLink()\" class=\"ILS_digit ISL_label_link\">\n          {{ additionalLinkTitle }}\n          </div>\n          <div (click)=\"digit(0)\" class=\"ILS_digit\">0</div>\n          <div *ngIf=\"ACDelbuttons\" (click)=\"remove()\" class=\"ILS_digit ILS_del\"></div>\n        </div>\n      </div>\n    `;\n\n/* Style */\nconst LOCK_SCREEN_STYLE = `\n          /* Animations*/\n          @keyframes ILS_shake {\n            from, to {\n              transform: translate3d(0, 0, 0);\n            }\n            10%, 30%, 50%, 70%, 90% {\n              transform: translate3d(-10px, 0, 0);\n            }\n            20%, 40%, 60%, 80% {\n              transform: translate3d(10px, 0, 0);\n            }\n          }\n          @keyframes ILS_buttonPress {\n            0% {\n              background-color: #acafb2;\n            }\n            100% {\n              background-color: #f9f9f9;\n            }\n          }\n          /* Lock Screen Layout*/\n          .ILS_lock {\n            display: flex;\n            flex-direction: column;\n            justify-content: flex-end;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: 999;\n            padding: 45px 0;\n            background-color: #f9f9f9;\n          }\n          .ILS_lock-hidden {\n            display: none;\n          }\n          .ISL_input-content {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            flex: 1;\n          }\n          .ILS_label-row {\n            height: 50px;\n            width: 100%;\n            text-align: center;\n            padding-top: 10px;\n            color: #141414;\n          }\n          .ISL_label_title {\n            font-size: 34px;\n            text-transform: uppercase;\n          }\n          .ISL_label_subTitle {\n            font-size: 14px;\n            padding-top: 0;\n          }\n          .ISL_label_link {\n            color: #666666 !important;\n            font-size: 14px !important;\n            padding-top: 26px !important;\n            background-color: transparent !important;\n          }\n          .ILS_del {\n            padding: 0 !important;\n            margin: 25px 48px !important;\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            width: 14px !important;\n            height: 14px !important;\n            transform: scale(var(--ggs,1));\n            border: 2px solid;\n            border-left: 0;\n            color: #666666 !important;\n            border-radius: 0px !important;\n            border-top-right-radius: 2px !important;\n            background-color: transparent !important;\n            border-bottom-right-radius: 2px !important;\n          }\n            .ILS_del::after,\n            .ILS_del::before {\n            content: \"\";\n            display: block;\n            box-sizing: border-box;\n            position: absolute\n            }\n           \n            .ILS_del::before {\n            background:\n            linear-gradient( to left,\n            currentColor 18px,transparent 0)\n            no-repeat center center/10px 2px;\n            border-right: 3px solid transparent;\n            box-shadow: inset 0 0 0 2px;\n            right: 2px;\n            bottom: 1px;\n            width: 8px;\n            height: 8px;\n            border-left: 3px solid transparent;\n            transform: rotate(45deg)\n            }\n           \n            .ILS_del::after {\n            width: 10px;\n            height: 10px;\n            border-top: 2px solid;\n            border-left: 2px solid;\n            border-top-left-radius: 1px;\n            transform: rotate(-45deg);\n            top: 0;\n            left: -5px\n            } \n          .ILS_circles-row {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            width: 100%;\n            height: 50px;\n          }\n          .ILS_circle {\n            background-color: transparent;\n            border-radius: 50%;\n            width: 12px;\n            height: 12px;\n            border: solid 1.5px #141414;\n            margin: 0 15px;\n          }\n          .ILS_numbers-row {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            width: 100%;\n            height: 85px;\n          }\n          .ILS_digit {\n            margin: 0 20px;\n            width: 68px;\n            border-radius: 50%;\n            height: 68px;\n            text-align: center;\n            padding-top: 22px;\n            font-size: 25px;\n            color: #141414;\n            background-color: #eaebeb;\n          }\n          .ILS_digit.activated {\n            -webkit-animation-name: ILS_buttonPress;\n            animation-name: ILS_buttonPress;\n            -webkit-animation-duration: 0.3;\n            animation-duration: 0.3s;\n          }\n          .ILS_full {\n            background-color:#141414!important;\n          }\n          .ILS_shake {\n            -webkit-animation-name: ILS_shake;\n            animation-name: ILS_shake;\n            -webkit-animation-duration: 0.5;\n            animation-duration: 0.5s;\n            -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n          }\n          \n`;\n\n@Component({\n    selector: 'lock-screen',\n    template: LOCK_SCREEN_TEMPLATE,\n    styles: [LOCK_SCREEN_STYLE]\n})\nexport class LockScreenComponent {\n\n    touchId: boolean;\n    setPasscode: boolean;       // initiate initial set passcode journey\n    ACDelbuttons: boolean;\n    passcodeWrong: boolean;\n    _showLockScreen: boolean;\n    firstPasswordSet: boolean;\n    _passcodeFallBack: boolean;      // use pin page if biometrics fail\n\n    passcodeAttempts: number = 0;\n\n    passcode: string;\n    touchLabel: string;\n    passcodeLabel: string;\n    passcodeSubTitle: string;\n    _firstSetPasscode: string;\n    additionalLinkTitle: string;\n    secondPasscodeLabel: string;\n\n    onWrong: any;\n    selected: any;\n    onCorrect: any;\n    onAdditionalLink: any;\n    enteredPasscode: any = '';\n\n    constructor(\n        public events: Events,\n        private navParams: NavParams,\n        private navCtrl: NavController,\n    ) {\n        this._showLockScreen = true;\n        this.passcode = navParams.data.code;\n        this.touchId = navParams.data.touchId || false;\n        this.setPasscode = navParams.data.setPasscode || false;\n        this.ACDelbuttons = navParams.data.ACDelbuttons || false;\n        this._passcodeFallBack = navParams.data.pinFallBack || false;\n\n        this.onWrong = navParams.data.onWrong || null;\n        this.onCorrect = navParams.data.onCorrect || null;\n        this.onAdditionalLink = navParams.data.onAdditionalLink || null;\n\n        this.passcodeSubTitle = navParams.data.passcodeSubTitle || null;\n        this.additionalLinkTitle = navParams.data.additionalLinkTitle || null;\n        this.touchLabel = navParams.data.passcodeLabel || 'Verify Passcode';\n        this.passcodeLabel = navParams.data.passcodeLabel || 'Enter Passcode';\n        this.secondPasscodeLabel = navParams.data.secondPasscodeLabel || 'Confirm passcode';\n    }\n\n    additionalLink(): void {\n        this.onAdditionalLink && this.onAdditionalLink();\n    }\n\n    _allClear(): void {\n        this.enteredPasscode = \"\";\n    }\n\n    remove(): void {\n        this.enteredPasscode = this.enteredPasscode.slice(0, -1);\n    }\n\n    digit(digit: any): void {\n        this.selected = +digit;\n        if (this.passcodeWrong) {\n            return;\n        }\n        this.enteredPasscode += '' + digit;\n\n        if (!this.setPasscode) {\n            if (this.enteredPasscode.length >= 4) {\n                this.enteredPasscode = Md5.hashStr(this.enteredPasscode);\n\n                if (this.enteredPasscode === '' + this.passcode) {\n                    this.enteredPasscode = '';\n                    this.passcodeAttempts = 0;\n                    this.onCorrect && this.onCorrect();\n                    this._showLockScreen = false;\n                    this.navCtrl.pop();\n                } else {\n                    this.passcodeWrong = true;\n                    this.passcodeAttempts++;\n                    this.onWrong && this.onWrong(this.passcodeAttempts);\n                    setTimeout(() => {\n                        this.enteredPasscode = '';\n                        this.passcodeWrong = false;\n                    }, 800);\n                }\n            }\n        } else {\n            if (this.enteredPasscode.length >= 4) {\n                if (!this.firstPasswordSet) {\n                    this._firstSetPasscode = this.enteredPasscode;\n                    this.firstPasswordSet = true;\n                    this._allClear();\n                } else {\n                    if (this.enteredPasscode === this._firstSetPasscode) {\n                        this.onCorrect && this.onCorrect(Md5.hashStr(this.enteredPasscode));\n                        this.enteredPasscode = '';\n                        this.passcodeAttempts = 0;\n                        this._showLockScreen = false;\n                        this._showLockScreen = false;\n                        this.navCtrl.pop();\n                    } else {\n                        this.passcodeWrong = true;\n                        this.passcodeAttempts++;\n                        this.onWrong && this.onWrong(this.passcodeAttempts);\n                        setTimeout(() => {\n                            this._firstSetPasscode = null;\n                            this.enteredPasscode = '';\n                            this.passcodeWrong = false;\n                            this.firstPasswordSet = false;\n                        }, 800);\n                    }\n                }\n            }\n        }\n    }\n}\n"]}